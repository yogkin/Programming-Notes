# SSL 和 TLS

所有连接到互联网的设备都有一个共同点，它们依赖 **安全套接字（secure socket layer）** 和 **传输层安全（transport layer security）** 协议保护传输的信息。

---
## 1 传输层安全

SSL 和 TLS 都是加密协议，旨在基于不安全的基础设施提供安全的通信，这意味着，如果正确部署这些协议，你就可以对互联网上任意的服务器打开通信信道，并且可以确信你与正确的服务器通信，安全地交换信息。这些协议保护着通信链路及传输层，这也是 TLS 名称的由来。

安全不是 TLS 唯一的目标，TLS 实际上有以下四个目标：

- 加密安全：为任何愿意交换的信息启动安全通信。
- 互操作性：独立的编程人员应该能够使用通用的加密参数开发程序和库，使它们可以互相通信。
- 可扩展性：TLS 是一种可以高效开发和部署加密协议的框架，其重要目的是独立于实际使用的加密基元（比如密码和散列码），从而不需要创建新的协议，就允许从一个基元迁移到另一个。
- 性能：最终的目标是在实现上述所有目标的基础上保证性能成本在可接受的范围内。

---
## 2 网络层

互联网的核心是建立在 IP（Internet protocol） 和 TCP（transmission control protocol） 之上的，这些协议用于将数据分割成小数据包进行传输，这些数据包在全世界范围内历经数千里的传输，在此期间，这些数据包要跨越许多国家的许多计算机系统（跃点, hop）。由于核心协议本身不提供任何安全保证，任何有权访问通信链路的人都可以获取所有的数据，并且可以在不被察觉的情况下修改这些数据。

IP 和 TCP 不是唯一易受攻击的协议，还有其他一系列路由协议用于协助发现网络的上的其他计算机。DNS 和 BGP 就是这样的两个协议。它们同样不安全，可以被攻击者通过各种方式劫持。

如果部署了加密协议，攻击者也许可以获取到加密的数据，但是却不能解密和篡改这些被加密的数据，为了避免被伪装攻击，SSL 和 TLS 依赖于一项被称之为 **公钥基础设施（public key infrastructure）** 的重要技术，确保流量发送到正确的接收端。

就像 OSI 设计一样，高层协议不必担心底层协议的实现，不同层的协议可以加入通信也可以从通信中移除，SSL 和 TLS 用于 TCP 之上，应用层（比如HTTP）之下。当不需要加密时可以把 TSL 从模型中去掉，这不会对上层协议产生影响。

---
## 3 协议历史


- SSL 协议由 Netscape 公司开发：第一个版本从未发布过。
- 第二个版本于 1994 年 11 月发布。1995 年 3 月第一次部署在 Netscape Navigator 1.1 浏览器上。
- SSL2 的开发基本上没有与 Netscape 公司的专家进行商讨，有严重的弱点，被认为是失败的协议，最终退出了历史舞台。
- SSL3 被 Netscape 完全重新设计，于 1995 年年底发布，该设计一直沿用至今。
- 1996 年 TLS 工作组成立，开始将 SSL 从 Netscape 迁移至 IETF。
- TLS1.0 于 1999 年 1 月问世，详见 RFC 2246.
- 2006 年 4 月 TLS1.1 才问世，仅仅修复了一些关键问题，然而协议的重要修改是作为 TLS 扩展于 2003 年 6 月发布的，并被集成到协议中。
- 2008 年 8 月 TLS1.2 发布，该版本增加了对已验证加密的支持，并基本上删除了协议说明中所有硬编码的安全基元，是协议完全弹性化，这是目前 TLS 的最新版本。

